{"version":3,"sources":["TeachersSelect.js"],"names":[],"mappings":"AAAA;;;;;;IACM,c;AACF,4BAAa,GAAb,EAAkB,QAAlB,EAA4B;AAAA;;AACxB,aAAK,kBAAL,GAA0B,GAA1B;AACA,aAAK,cAAL,CAAoB,QAApB;AACA,aAAK,YAAL;AACA,aAAK,YAAL,GAAoB,EAApB;AACA,aAAK,iBAAL;AACH;;;;uCAEe,Q,EAAU;AACtB,iBAAK,QAAL,GAAgB,SAAS,aAAT,CAAuB,WAAvB,CAAhB;AACA,iBAAK,UAAL,GAAkB,SAAS,aAAT,CAAuB,cAAvB,CAAlB;AACA,iBAAK,SAAL,GAAiB,WAAjB;AACA,iBAAK,SAAL,GAAiB,kBAAjB;AACA,iBAAK,aAAL,GAAqB,UAArB;AACA,iBAAK,WAAL,GAAmB,QAAnB;AACA,iBAAK,QAAL,GAAgB,SAAS,aAAT,CAAuB,WAAvB,CAAhB;AACH;;;uCAEe;AAAA;;AACZ,iBAAK,UAAL,CAAgB,gBAAhB,CAAiC,OAAjC,EAA0C,UAAC,CAAD,EAAO;AAC7C,kBAAE,cAAF;AACA,sBAAK,iBAAL;AACH,aAHD;AAIH;;;4CAEoB;AACjB,mBAAO,MAAM,YAAN,CAAmB,KAAnB,EAA0B,KAAK,kBAA/B,EAAmD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAnD,CAAP;AACH;;;qCAEY,I,EAAM;AACf,iBAAK,YAAL,GAAoB,IAApB;AACA,iBAAK,gBAAL;AACH;;;2CAEmB;AAAA;;AAChB,iBAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAC,OAAD,EAAa;AACnC,oBAAI,MAAM,SAAS,aAAT,CAAuB,QAAvB,CAAV;AACA,oBAAI,KAAJ,GAAY,QAAQ,EAApB;AACA,oBAAI,SAAJ,GAAgB,QAAQ,UAAR,GAAoB,GAApB,GAAwB,QAAQ,SAAhD;AACA,uBAAK,QAAL,CAAc,WAAd,CAA0B,GAA1B;AACH,aALD;AAMH;;;4CAEoB;AAAA;;AACjB,gBAAI,oBAAoB,SAAS,aAAT,CAAuB,QAAvB,CAAxB;AAAA,gBACQ,0BAA0B,KAAK,WAAL,CAAiB,aAAjB,CAA+B,6BAA/B,CADlC;AAAA,gBAEQ,OAAO,SAAS,aAAT,CAAuB,MAAvB,CAFf;AAGI,8BAAkB,SAAlB,CAA4B,GAA5B,CAAgC,KAAK,aAArC;AACA,oCAAwB,WAAxB,CAAoC,iBAApC;AACA,iBAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAC,OAAD,EAAa;AACnC,oBAAI,MAAM,SAAS,aAAT,CAAuB,QAAvB,CAAV;AACA,oBAAI,KAAJ,GAAY,QAAQ,EAApB;AACA,oBAAI,SAAJ,GAAgB,QAAQ,UAAR,GAAoB,GAApB,GAAwB,QAAQ,SAAhD;AACA,kCAAkB,WAAlB,CAA8B,GAA9B;AACH,aALD;AAMA,iBAAK,SAAL,CAAe,GAAf,CAAmB,KAAK,SAAxB;AACA,iBAAK,SAAL,CAAe,GAAf,CAAmB,KAAK,SAAxB;AACA,iBAAK,gBAAL,CAAsB,OAAtB,EAA+B,YAAM;AACjC,uBAAK,qBAAL,CAA2B,IAA3B;AACA,qBAAK,MAAL;AACH,aAHD;AAIA,oCAAwB,WAAxB,CAAoC,IAApC;AACP;;;8CAEsB,I,EAAM;AACzB,iBAAK,eAAL,CAAqB,MAArB;AACH","file":"TeachersSelect-compiled.js","sourcesContent":["'use strict';\r\nclass TeachersSelect {\r\n    constructor (url, elements) {\r\n        this.getTeachersListUrl = url;\r\n        this.defineElements(elements);\r\n        this.attachEvents();\r\n        this.teachersList = [];\r\n        this.getTeachersFromDb();\r\n    }\r\n\r\n    defineElements (elements) {\r\n        this.teachers = elements.querySelector('.teachers');\r\n        this.addTeacher = elements.querySelector('.add-teacher');\r\n        this.glyphicon = \"glyphicon\";\r\n        this.spanClass = \"glyphicon-remove\";\r\n        this.teachersClass = \"teachers\";\r\n        this.addGroupBox = elements;\r\n        this.location = elements.querySelector('.location');\r\n    }\r\n\r\n    attachEvents () {\r\n        this.addTeacher.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            this.addTeachersSelect()\r\n        });\r\n    }\r\n\r\n    getTeachersFromDb () {\r\n        return Frame.ajaxResponse('GET', this.getTeachersListUrl, this.saveTeachers.bind(this));\r\n    }\r\n\r\n    saveTeachers(data) {\r\n        this.teachersList = data;\r\n        this.initTeachersList();\r\n    }\r\n\r\n    initTeachersList () {\r\n        this.teachersList.forEach((teacher) => {\r\n            let opt = document.createElement('option');\r\n            opt.value = teacher.id;\r\n            opt.innerHTML = teacher.first_name +' '+teacher.last_name;\r\n            this.teachers.appendChild(opt);\r\n        });\r\n    }\r\n\r\n    addTeachersSelect () {\r\n        let newTeachersSelect = document.createElement('select'),\r\n                teachersSelectContainer = this.addGroupBox.querySelector('.teachers-selects-container'),\r\n                span = document.createElement('span');\r\n            newTeachersSelect.classList.add(this.teachersClass);\r\n            teachersSelectContainer.appendChild(newTeachersSelect);\r\n            this.teachersList.forEach((teacher) => {\r\n                let opt = document.createElement('option');\r\n                opt.value = teacher.id;\r\n                opt.innerHTML = teacher.first_name +' '+teacher.last_name;\r\n                newTeachersSelect.appendChild(opt);\r\n            });\r\n            span.classList.add(this.glyphicon);\r\n            span.classList.add(this.spanClass);\r\n            span.addEventListener('click', () => {\r\n                this.removePreviousSibling(span);\r\n                span.remove();\r\n            });\r\n            teachersSelectContainer.appendChild(span);\r\n    }\r\n\r\n    removePreviousSibling (span) {\r\n        span.previousSibling.remove();\r\n    }\r\n\r\n\r\n}\r\n"]}