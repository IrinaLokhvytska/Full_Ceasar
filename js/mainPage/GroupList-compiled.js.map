{"version":3,"sources":["GroupList.js"],"names":[],"mappings":"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","file":"GroupList-compiled.js","sourcesContent":["'use strict';\r\n\r\nclass GroupList {\r\n    constructor(urlArray, groupInfoElement, locationsList) {\r\n        this.locationsList = locationsList;\r\n        this.urlGetGroupList = urlArray[0];\r\n        this.urlShowGroup = urlArray[1];\r\n        this.urlShowMyGroupList = urlArray[2];\r\n        this.groupInfoElement = groupInfoElement;\r\n        this.groupsNav = document.querySelector('#groupsNav');\r\n        this.pageNumberElement = this.groupsNav.querySelector('.pagination .pageNumber');\r\n        this.pageQuantityElement = this.groupsNav.querySelector('.pagination .numberOfPages');\r\n        this.pagePrevElement = this.groupsNav.querySelector('.pagination .prevPage');\r\n        this.pageNextElement = this.groupsNav.querySelector('.pagination .nextPage');\r\n        this.groupListElement = this.groupsNav.querySelector('.groupList');\r\n        this.myGroupListBtnElement = document.querySelector('.myGroupListBtn');\r\n        this.groupList = [];\r\n        this.myGroupList = [];\r\n        this.pageNumber = 1;\r\n        this.pageQuantity = 1;\r\n        this.getGroupList(this.locationsList);\r\n        this.getMyGroupList();\r\n        this.attachNavMenuEvents();\r\n    }\r\n\r\n    getMyGroupList() {\r\n        Frame.ajaxResponse('GET', this.urlShowMyGroupList, this.saveMyGroupList.bind(this));\r\n    }\r\n\r\n    saveMyGroupList(array) {\r\n        this.myGroupList = array;\r\n    }\r\n\r\n    getGroupList(locations, outerRequest = false) {\r\n        if (outerRequest === true) {\r\n            this.pageNumber = 1;\r\n            this.filterOn = false;\r\n            this.myGroupListBtnElement.innerHTML = \"My groups\";\r\n        }\r\n\r\n        if (locations !== this.locationsList) {\r\n            this.locationsList = locations;\r\n        }\r\n\r\n        Frame.ajaxResponse('GET', this.urlGetGroupList + '/par/' + this.locationsList, this.saveGroupList.bind(this));\r\n    }\r\n\r\n    saveGroupList(array) {\r\n        this.groupList = array[0];\r\n        this.locationsList = array[1];\r\n        this.createGroupList(this.pageNumber, this.groupList);\r\n    }\r\n\r\n    createGroupList(newPageNumber, groupsArray) {\r\n        let groups = groupsArray,\r\n            groupsQuantity = groups.length,\r\n            firstGroupNumber = (newPageNumber - 1) * 10 + 1,\r\n            tempNum = groupsQuantity < 10 ? groupsQuantity : groupsQuantity - (newPageNumber - 1) * 10,\r\n            arrLen = tempNum < 10 ? tempNum : 10,\r\n            pageGroupList = [];\r\n\r\n        this.deleteGroups();\r\n\r\n        for (let i = 0; i < arrLen; i++) {\r\n            let addLastOddGroupClass = false;\r\n            if (i === arrLen - 1 && i % 2 === 0) {\r\n                addLastOddGroupClass = true;\r\n            }\r\n            this.createGroup(groups[firstGroupNumber + i - 1]['group_name'], groups[firstGroupNumber + i - 1]['direction_name'], addLastOddGroupClass);\r\n            pageGroupList.push(groups[firstGroupNumber + i - 1]);\r\n        }\r\n\r\n        this.pageNumberElement.innerHTML = newPageNumber;\r\n        this.pageQuantity = Math.ceil(groupsQuantity / 10);\r\n        this.pageQuantityElement.innerHTML = this.pageQuantity;\r\n\r\n        this.attachGroupsEvents(pageGroupList);\r\n    }\r\n\r\n    attachGroupsEvents(pageGroupList) {\r\n        let groups = this.groupsNav.querySelectorAll('.group'),\r\n            groupsLen = groups.length,\r\n            groupListArr = pageGroupList;\r\n\r\n        function uncheckGroups(i) {\r\n            for (let ii = 0; ii < groupsLen; ii++) {\r\n                if (ii !== i) {\r\n                    groups[ii].classList.remove('checkedGroup');\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < groupsLen; i++) {\r\n            groups[i].addEventListener('click', () => {\r\n                if (!groups[i].classList.contains('checkedGroup')) {\r\n                    groups[i].classList.add('checkedGroup');\r\n                    uncheckGroups(i);\r\n                    let groupId = groupListArr[i].group_id,\r\n                        groupName = groupListArr[i].group_name,\r\n                        groupLocation = groupListArr[i].group_location,\r\n                        groupDirection = groupListArr[i].direction_name,\r\n                        groupStartDate = groupListArr[i].start_date,\r\n                        groupBudget = groupListArr[i].budget,\r\n                        groupDirectionId = groupListArr[i].direction_id,\r\n                        groupLocationId = groupListArr[i].group_location_id,\r\n                        groupInfo = [groupId, groupName, groupLocation, groupDirection, groupStartDate, groupBudget, groupDirectionId, groupLocationId];\r\n                    this.groupInfoElement.showGroupInfo(groupInfo);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    attachNavMenuEvents() {\r\n        this.pagePrevElement.addEventListener('click', () => {\r\n            if (this.pageNumber > 1) {\r\n                this.pageNumber--;\r\n                this.pageNumberElement.innerHTML = this.pageNumber;\r\n                this.deleteGroups();\r\n                this.createGroupList(this.pageNumber, this.groupList);\r\n            }\r\n        });\r\n\r\n        this.pageNextElement.addEventListener('click', () => {\r\n            if (this.pageNumber < this.pageQuantity) {\r\n                this.pageNumber++;\r\n                this.pageNumberElement.innerHTML = this.pageNumber;\r\n                this.deleteGroups();\r\n                this.createGroupList(this.pageNumber, this.groupList);\r\n            }\r\n        });\r\n\r\n        this.myGroupListBtnElement.addEventListener('click', () => {\r\n            this.pageNumber = 1;\r\n            this.deleteGroups();\r\n            if (!this.filterOn) {\r\n                let groupListArr = [],\r\n                    myGroupListArrLen = this.myGroupList.length,\r\n                    locationListArrLen = this.locationsList.length;\r\n                for (let i = 0; i < myGroupListArrLen; i++) {\r\n                    let iGroup = this.myGroupList[i];\r\n                    for (let j = 0; j < locationListArrLen; j++) {\r\n                        if (iGroup.group_location === this.locationsList[j]) {\r\n                            groupListArr.push(this.myGroupList[i]);\r\n                        }\r\n                    }\r\n                }\r\n                this.filterOn = true;\r\n                this.myGroupListBtnElement.innerHTML = \"All groups\";\r\n                this.createGroupList(this.pageNumber, groupListArr);\r\n            } else {\r\n                this.filterOn = false;\r\n                this.myGroupListBtnElement.innerHTML = \"My groups\";\r\n                this.createGroupList(this.pageNumber, this.groupList);\r\n            }\r\n        });\r\n    }\r\n\r\n    formMyGroupList() {\r\n\r\n    }\r\n\r\n    deleteGroups() {\r\n        while (this.groupListElement.firstChild) {\r\n            this.groupListElement.removeChild(this.groupListElement.firstChild);\r\n        }\r\n    }\r\n\r\n    createGroup(gName, gDirection, addLastOddGroupClass) {\r\n        let group = this.groupListElement.appendChild(document.createElement('DIV')),\r\n            groupName = group.appendChild(document.createElement('SPAN')),\r\n            groupDirection = group.appendChild(document.createElement('SPAN'));\r\n\r\n        if (addLastOddGroupClass) {\r\n            group.className = 'group lastOddGroup';\r\n        } else {\r\n            group.className = 'group';\r\n        }\r\n        groupName.innerHTML = gName;\r\n        groupName.className = 'grName';\r\n        groupDirection.innerHTML = gDirection;\r\n        groupDirection.className = 'grDirection';\r\n    }\r\n}\r\n"]}