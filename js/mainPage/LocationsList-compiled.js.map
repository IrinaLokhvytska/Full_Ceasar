{"version":3,"sources":["LocationsList.js"],"names":[],"mappings":"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","file":"LocationsList-compiled.js","sourcesContent":["'use strict';\r\n\r\nclass LocationsList {\r\n    constructor(locationModalElement, urlArray, groupListMenuObj) {\r\n        this.urlGetLocations = urlArray[0];\r\n        this.urlShowLocations = urlArray[1];\r\n        this.selectedLocations = [];\r\n        this.locationModal = locationModalElement;\r\n        this.groupListMenu = groupListMenuObj;\r\n        this.getLocations();\r\n        this.attachConfirmBtnEvent();\r\n        this.locations = [];\r\n    }\r\n\r\n    createLocationsList() {\r\n        let locQuantity = this.locations.length;\r\n\r\n        for (let i = 0; i < locQuantity; i++) {\r\n            this.createLocation(this.locations[i]['full_name']);\r\n        }\r\n\r\n        this.attachLocationsEvents();\r\n    }\r\n\r\n    getLocations() {\r\n        return Frame.ajaxResponse('GET', this.urlGetLocations, this.saveLocations.bind(this));\r\n    }\r\n\r\n    saveLocations(data) {\r\n        this.locations = data;\r\n        this.createLocationsList();\r\n    }\r\n\r\n    createLocation(cityName) {\r\n        let locationsList = this.locationModal.querySelector('.loc-list'),\r\n            location = locationsList.appendChild(document.createElement('DIV'));\r\n\r\n        location.className = 'loc';\r\n        location.innerHTML = cityName;\r\n    }\r\n\r\n    attachLocationsEvents() {\r\n        let locations = this.locationModal.querySelectorAll('.loc'),\r\n            locationsLen = locations.length;\r\n\r\n        for (let i = 0; i < locationsLen; i++) {\r\n            locations[i].addEventListener('click', () => {\r\n                if (locations[i].classList.contains('checkedLocation')) {\r\n                    locations[i].classList.toggle('checkedLocation');\r\n                    let index = this.selectedLocations.indexOf(locations[i].innerHTML);\r\n                    if (index > -1) {\r\n                        this.selectedLocations.splice(index, 1);\r\n                    }\r\n                } else {\r\n                    locations[i].classList.toggle('checkedLocation');\r\n                    this.selectedLocations.push(locations[i].innerHTML);\r\n                }\r\n            });\r\n            locations[i].addEventListener('dblclick', () => {\r\n                this.selectedLocations = [locations[i].innerHTML];\r\n                this.locationModal.querySelector('#confirm').click();\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    attachConfirmBtnEvent() {\r\n        let confirm = this.locationModal.querySelector('#confirm');\r\n        confirm.addEventListener('click', this.sendSelectedGroups.bind(this));\r\n    }\r\n\r\n    sendSelectedGroups() {\r\n        this.groupListMenu.getGroupList(this.selectedLocations, true);\r\n        this.clearSelectedLocations();\r\n    }\r\n\r\n    clearSelectedLocations() {\r\n        this.selectedLocations = [];\r\n        let locations = this.locationModal.querySelectorAll('.loc'),\r\n            locationsLen = locations.length;\r\n        for (let i = 0; i < locationsLen; i++) {\r\n            if (locations[i].classList.contains('checkedLocation')) {\r\n                locations[i].classList.remove('checkedLocation');\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}